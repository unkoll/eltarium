Эльтариум

Легенда:
$$$ - не хранить в БД поле и всех его потомков.

Player (поля персонажей): 

	name(Имя) - строка
	player(Игрок) - строка
	color (Цвет) - #XXXXXX
	avatar (Аватарка) - ссылка на изображение
	stats (Характеристики):
		health (Здоровье) : 
			cur (Текущее) - число
			$$$ max (Максимальное) - число 
			$$$ recovery (Восстановление за час) - число

		energy (Энергия) : 
			cur (Текущее) - число
			$$$ max (Максимальное) - число 
			$$$ recovery (Восстановление за час) - число

		action (Очки действия) : 
			сur (Текущее) - число
			$$$ max (Максимальное) - число
			$$$ base (Начальные) - число
			$$$ recovery (Восстановление за ход) - число

		$$$ armor (Броня) :  
			dt (Порог урона) - число
			at (Порог брони) - число
        $$$ movement (Передвижение) - дробное число
        $$$ weight (Вес) :
        	cur (Текущий вес) - число
        	max (Максимальный вес) - число
        
		main (Основные) :
			strength (Сила):
				base - число
				$$$ bonus - число
			agility (Ловкость):
				base - число
				$$$ bonus - число
			perception (Восприятие):
				base - число
				$$$ bonus - число
			intelligence (Интеллект):
				base - число
				$$$ bonus - число
			stamina (Выносливость):
				base - число
				$$$ bonus - число
			speed (скорость):
				base - число 
				$$$ bonus - число
			free (Свободные):
				base - число
				$$$ bonus - число
        
        $$$ resist (Сопротивления):
        	phys (Физический урон) - число
            energy (Энергетический урон) - число
        	poison (Яд) - число
        	will (Воля) - число
        
		$$$ critical (Критические эффекты):
			crit (Критический удар) - число
			burning (Горение) - число
			bleed (Кровотечение) - число
			dazzle (Ослепление) - число
			counter_attack (Контратака) - число
			enrage (Исступление) - число
			double_strike (Двойной удар) - число
			poison (Отравление) - число
			delay (Замедление) - число
			exact_strike (Точный удар) - число
			armor_ignoring (Игнорирование брони) - число

		$$$ chances (Шансы):
			battle (Боевые):
				one_handed (Одноручное) - число
				two_handed (Двуручное) - число
				bow (Лук) - число 
				arbalest (Арбалет) - число 
				fire (Огнестрельное) - число
				fists (Кулачный бой) - число 
				
				ritual_magic (Школа ритуалов) - число
				rune_magic (Школа рун) - число
				spell_magic (Школа закинаний) - число
				
				absolute_magic (Абсолютная школа) - число
				evasion (Уклонение) - число
				blocking (Блокирование) - число

			peaceful (Мирные):
				science (Наука) - число
				logic (Логика) - число
				gambling (Азартные игры) - число
				sneak (Скрытность) - число
				lock_peaking (Взлом) - число
				persuasion (Убеждение) - число

	Skills (Навыки):
		one_handed (Одноручное оружие) -  Skill
		two_handed (Двуручное оружие)  - Skill
		bow (Лук) - Skill
		arbalest (Арбалет) - Skill
		fire (Огнестрельное оружие) - Skill
		fists (Кулачный бой) - Skill

		armor (Броня) - Skill
		shields (Щиты) - Skill

		magic (Магия) - Skill
		
		science (Наука) - Skill
		logic (Логика) - Skill
		gambling (Азартные игры) - Skill
		sneak (Скрытность) - Skill
		communication (Общение) - Skill
		music (Музыка) - Skill
		blacksmithing (Кузнечное дело) - Skill
		jewellery (Ювелирное дело) - Skill
		tailoring (Портняжное дело) - Skill
		alchemy (Алхимия) - Skill
		medicine (Медицина) - Skill
    
    
	inventory (Инвентарь): 
		clothes (Одежда): {
			head (Голова) - Item
			torso (Торс) - Item
			hands (Руки) - Item
			legs (Ноги) - Item
			belt (Пояс) - Item
			neck (Шея) - Item
			ring1 (Кольцо1) - Item
			ring2 (Кольцо2) - Item
			wrist (Запястье) - Item
			ear (Ухо) - Item
			cloak (Плащ) - Item
			artefact (Артефакт) - Item
			}
			
		using_weapon (Использующееся) - main|additional|hide
        using_ammo (Используемые боеприпасы) - число (номер ячейки в сумке для боеприпасов)
 
		weapon (Оружие):
			main (Основное): {
				main (основная рука) - Item
				offend (дополнительная рука) - Item	
			}
			additional (Дополнительное): {
				main (основная рука) - Item
				offend  (дополнительная рука) - Item
			}
			hide (Скрытое) : {
				main (основная рука) - Item
				offend  (дополнительная рука) - Item
			}
		bags (Сумки):
			bag (Сумка) - Item
			main (Основная) - [Item]
			flask (Для зелий) - [Item]
			ammo (Для боеприпасов) - [Item]
		money (Деньги):
			ruby (Рубины) - число
			emerald (Изумруды) - число
			sapphire (Сапфиры) - число
			azar (Азары) - число
			ancient (Древние монеты) - число
		docs (Документы): [
			текст
		]
	
	effects (Эффекты): [
		Effect
	]
	
	spellbook (Книга заклинаний): [
		Spell
	]



Item (поля предметов): 

	name (Имя) — строка
	description (Описание) — текст
	type (Тип) — строка в особом формате (Пример: «weapon two-handed sword»)
	rarely (Редкость) — число:
	    0 — мусор
	    1 — обычный
	    2 — необычный
	    3 — редкий
	    4 — эпический
	    5 — легендарный
	lvl (Уровень предмета) — число [0;7]
	weigth (Вес) — дробное число
	bonus (Бонус) : [строка-запрос]
	
	capacity (Емкость) — число
	revive (Восстановление) — дробное число 

    
	damage (Урон) — строка
	action (Затраты очков действий) — число
	dist (Оптимальная дистанция) - число
	penalty (Штраф за дальность) — число
	ammo (Боеприпасы) - строка

	dt (Порог урона) — дробное число
	at (Порог брони) — дробное число
	movement (Передвижение) — дробное число

	blocking (Шанс блокирования) — число
			
	cnt (Максимальное количество/количество зарядов) — число
    
    (Только зелья)
	toxicity (Токсичность) — число
	effect (Эффект) — Effect
			
    (Только боеприпасы)
	misfire (Шанс осечки) — дробное число
			
		
Effect (поля эффектов): 

	name (Название) — строка
	source (Источник) - строка
	condition (Условие) — строка-условие
	effect (Условие) — строка-запрос
	duration (Длительность) — число (-1 если бесконечно)
	

Skill (поле навыка): 

	name (Название) — строка
	exp (Не распределенный опыт) — число
	lvl (Уровень) - число
	tree: [id перков]
	active (Активные перки):[id перков]	


Perk (поле перка): 

	name (Название) — строка
	icon (Изображение) - ссылка на изображение
	need (Требование) — [id других перков]
	lvl (Требуемый уровень навыка) - число
	exp (Стоимость) — число
	effects: [ {condtional: строка, effect : строка }  ]


Spell (заклинание):

	name (Название) - строка
	description (Описание) - текст
	icon (Иконка) - ссылка на изображение
	action (Затраты очков действий) - число
	energy (Затраты энергии) - число
	
	type: (element|combinative|perk)
	effects (Эффекты): Effect 
	school (Школы) : строка (ritual, spell, rune), разделитель - пробел;
	spell (Сила заклинания) : строка-запрос, значение возьмется из player.buffer, тип не указывать
	chance (Шансы) : { название шанса: строка-запрос, значение возьмется из player.buffer, тип не указывать  }
	
Структура запроса:

Запрос условия: 

    ((# path # operator) & (# path # operator)) | (# path # operator)
    path - строка вида "stats main strength bonus"
    operator - 1) строка сравнения элемента, находящегося в ячейке, указываемой путем "> 0"
                2)строка  сравнения предмета, начинается на "is". Дальнейшие варианты: 
                    is heavy|light|shield - касательно брони
                    is *weapon type* - касательно оружия
                    is hand == 1 - касательно предемтов в руке